<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PAC-MAN Trial Page</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:#05050b;overflow:hidden;color:#fff}

    #game-wrap{position:fixed;inset:0;z-index:0}

    .ui-panel{position:relative;z-index:5;display:flex;align-items:center;justify-content:center;height:100vh;padding:20px}
    .card{background:linear-gradient(180deg, rgba(33,5,66,0.95), rgba(10,3,20,0.9));backdrop-filter:blur(6px);border-radius:22px;padding:30px;box-shadow:0 12px 50px rgba(0,0,0,0.7),0 0 30px rgba(124,58,237,0.5);display:flex;gap:24px;align-items:center;max-width:940px;width:95%;animation:fadeIn 1.2s ease forwards;transform-style:preserve-3d}

    @keyframes fadeIn{from{opacity:0;transform:scale(0.9) rotateX(10deg)}to{opacity:1;transform:scale(1) rotateX(0)}}

    .left{flex:1;display:flex;flex-direction:column;gap:18px}
    h1{font-size:22px;letter-spacing:1.2px;text-transform:uppercase;text-align:center;padding:12px 14px;border-radius:12px;background:linear-gradient(90deg, rgba(124,58,237,0.3), rgba(91,33,187,0.25));color:#f8f0ff;text-shadow:0 0 8px #a855f7,0 0 15px #7c3aed}
    .subtitle{text-align:center;font-size:14px;color:#cfc4ff}

    .controls{display:flex;gap:14px;align-items:center;justify-content:center}
    .btn{padding:14px 22px;border-radius:14px;border:0;font-weight:700;cursor:pointer;font-size:15px;min-width:210px;transition:transform .15s ease,opacity .2s,background .3s,box-shadow .3s}
    .btn:active{transform:translateY(2px)}
    .btn.disabled{opacity:.6;cursor:default;background:#333;color:#999}
    .btn:not(.disabled){background:linear-gradient(90deg,#ffcc00,#ffaa00);color:#222;box-shadow:0 0 18px rgba(255,204,0,0.7),0 0 30px rgba(255,170,0,0.5)}

    .qr-wrap{width:190px;height:190px;border-radius:14px;padding:12px;background:linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));display:flex;align-items:center;justify-content:center;animation:pulse 2s infinite ease-in-out,glow 3s infinite alternate}
    .qr-wrap canvas{max-width:100%;max-height:100%;display:block;filter:drop-shadow(0 0 8px #7c3aed)}

    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.07)}}
    @keyframes glow{0%{box-shadow:0 0 10px #7c3aed}100%{box-shadow:0 0 25px #ffcc00}}

    .foot{font-size:13px;color:#d2c7ff;text-align:center;margin-top:8px;text-shadow:0 0 6px #5b21b6}

    @media (max-width:720px){.card{flex-direction:column}.qr-wrap{width:150px;height:150px}}
  </style>
</head>
<body>
  <div id="game-wrap">
    <canvas id="pacmanCanvas"></canvas>
  </div>

  <div class="ui-panel">
    <div class="card" role="region" aria-label="Trial card">
      <div class="left">
        <h1>Trial 3 Days — XMSTEALABRAINROTMX KEY</h1>
        <div class="subtitle">Limited release — copy it now</div>

        <div class="controls">
          <button id="trialBtn" class="btn disabled">Please wait — 8</button>
          <div class="qr-wrap" title="QR linking to ROBLOX server">
            <canvas id="qrcode"></canvas>
          </div>
        </div>

        <div class="foot">Click the button when it becomes active to get the trial. QR also links to the same server.</div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script>
    const SERVER_LINK = "https://www.roblox.com/share?code=486086bab4114d46bd50e39afd55bbaf&type=Server";

    // Use QRious (JS library) to generate QR code client-side
    const qr = new QRious({
      element: document.getElementById('qrcode'),
      value: SERVER_LINK,
      size: 180,
      background: 'white',
      foreground: 'black',
      level: 'H'
    });

    const btn = document.getElementById('trialBtn');
    let countdown = 8;
    const tick = () => {
      btn.textContent = (countdown>0) ? `Please wait — ${countdown}` : 'Get trial key';
      if(countdown<=0){
        btn.classList.remove('disabled');
        btn.onclick = () => { window.open(SERVER_LINK, '_blank'); }
      } else {
        btn.classList.add('disabled');
      }
      countdown--;
    }
    tick();
    const interval = setInterval(()=>{tick();if(countdown< -1) clearInterval(interval);},1000);

    // Pac-Man style background with straight movement + neon maze grid
    const canvas = document.getElementById('pacmanCanvas');
    const ctx = canvas.getContext('2d');
    function resize(){canvas.width = window.innerWidth;canvas.height = window.innerHeight;}
    window.addEventListener('resize', resize);resize();

    const pac = {x:100,y:200,r:22,dirX:3,dirY:0,open:0};
    const ghosts = [];
    const colors = ['#ff4d4d','#ffb86b','#6be4ff','#c78bff'];
    for(let i=0;i<4;i++){
      ghosts.push({x:200+i*80,y:100+i*60,r:18,dx:(Math.random()>0.5?2:-2),dy:(Math.random()>0.5?2:-2),color:colors[i]});
    }
    const dots=[];
    for(let y=40;y<canvas.height;y+=60){
      for(let x=40;x<canvas.width;x+=60){
        dots.push({x,y});
      }
    }

    function drawMaze(){
      ctx.strokeStyle = '#1e3a8a';
      ctx.lineWidth = 4;
      ctx.shadowColor = '#3b82f6';
      ctx.shadowBlur = 12;
      for(let y=20;y<canvas.height;y+=120){
        ctx.beginPath();ctx.moveTo(20,y);ctx.lineTo(canvas.width-20,y);ctx.stroke();
      }
      for(let x=20;x<canvas.width;x+=120){
        ctx.beginPath();ctx.moveTo(x,20);ctx.lineTo(x,canvas.height-20);ctx.stroke();
      }
      ctx.shadowBlur = 0;
    }

    function drawPacman(p){
      ctx.save();ctx.translate(p.x,p.y);
      const mouth = 0.3+Math.abs(Math.sin(p.open))*0.3;
      ctx.beginPath();ctx.moveTo(0,0);
      ctx.arc(0,0,p.r,mouth*Math.PI,(2-mouth)*Math.PI,false);
      ctx.closePath();ctx.fillStyle='#ffe66d';ctx.shadowColor='#ffcc00';ctx.shadowBlur=20;ctx.fill();ctx.shadowBlur=0;ctx.restore();
    }

    function drawGhost(g){
      ctx.save();ctx.translate(g.x,g.y);
      ctx.beginPath();ctx.arc(0,0,g.r,Math.PI,0,false);
      ctx.lineTo(g.r,g.r);
      ctx.lineTo(-g.r,g.r);
      ctx.closePath();ctx.fillStyle=g.color;ctx.shadowColor=g.color;ctx.shadowBlur=18;ctx.fill();ctx.shadowBlur=0;
      ctx.fillStyle='#fff';ctx.beginPath();ctx.arc(-6,-2,5,0,Math.PI*2);ctx.fill();ctx.beginPath();ctx.arc(6,-2,5,0,Math.PI*2);ctx.fill();ctx.fillStyle='#222';ctx.beginPath();ctx.arc(-6,-2,2,0,Math.PI*2);ctx.fill();ctx.beginPath();ctx.arc(6,-2,2,0,Math.PI*2);ctx.fill();ctx.restore();
    }

    function step(){
      ctx.fillStyle='#000';ctx.fillRect(0,0,canvas.width,canvas.height);
      drawMaze();
      ctx.fillStyle='#fff';
      for(const d of dots){ctx.beginPath();ctx.arc(d.x,d.y,4,0,Math.PI*2);ctx.fill();}

      pac.x+=pac.dirX;pac.y+=pac.dirY;
      if(pac.x<pac.r||pac.x>canvas.width-pac.r) pac.dirX*=-1;
      if(pac.y<pac.r||pac.y>canvas.height-pac.r) pac.dirY*=-1;
      pac.open+=0.2;
      drawPacman(pac);

      for(const g of ghosts){
        g.x+=g.dx;g.y+=g.dy;
        if(g.x<g.r||g.x>canvas.width-g.r) g.dx*=-1;
        if(g.y<g.r||g.y>canvas.height-g.r) g.dy*=-1;
        drawGhost(g);
      }

      requestAnimationFrame(step);
    }
    step();
  </script>
</body>
</html>
